{"version":3,"file":"index.js","sources":["../src/js/products-api.js","../src/js/refs.js","../src/js/render-function.js","../src/js/constants.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["const BASE_URL = 'https://dummyjson.com';\n\nexport async function fetchCategories() {\n  const res = await fetch(`${BASE_URL}/products/categories`);\n  if (!res.ok) throw new Error('Failed to fetch categories');\n  return res.json();\n}\n\nexport async function fetchProducts({\n  category = '',\n  page = 1,\n  limit = 12,\n} = {}) {\n  let url;\n  if (category && category !== 'All') {\n    url = `${BASE_URL}/products/category/${encodeURIComponent(\n      category\n    )}?limit=${limit}&skip=${(page - 1) * limit}`;\n  } else {\n    url = `${BASE_URL}/products?limit=${limit}&skip=${(page - 1) * limit}`;\n  }\n  const res = await fetch(url);\n  if (!res.ok) throw new Error('Failed to fetch products');\n  return res.json();\n}\n","export const refs = {\n  // Список категорій\n  categoriesList: document.querySelector('.categories'),\n  // Список продуктів\n  productsList: document.querySelector('.products'),\n  // Повідомлення \"не знайдено\"\n  notFound: document.querySelector('.not-found'),\n  // Кнопка \"Load More\" (додається динамічно)\n  get loadMoreBtn() {\n    return document.querySelector('.load-more-btn');\n  },\n  // Інпут пошуку (якщо є)\n  searchInput: document.querySelector('.search-form__input'), // виправлено селектор\n  // Форма пошуку (якщо є)\n  searchForm: document.querySelector('.search-form'),\n  // Кнопка очищення пошуку (якщо є)\n  searchClearBtn: document.querySelector('.search-form__btn-clear'),\n};\n","import { refs } from './refs.js';\n\nexport function renderCategories(categories, activeCategory) {\n  refs.categoriesList.innerHTML = categories\n    .map(\n      cat =>\n        `<li class=\"categories__item\">\n          <button class=\"categories__btn${\n            cat === activeCategory ? ' categories__btn--active' : ''\n          }\" type=\"button\">${cat}</button>\n        </li>`\n    )\n    .join('');\n}\n\nexport function renderProducts(products) {\n  refs.productsList.innerHTML = products\n    .map(\n      prod =>\n        `<li class=\"products__item\" data-id=\"${prod.id}\">\n          <img class=\"products__image\" src=\"${prod.thumbnail}\" alt=\"${prod.title}\"/>\n          <p class=\"products__title\">${prod.title}</p>\n          <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:</span> ${prod.brand}</p>\n          <p class=\"products__category\">Category: ${prod.category}</p>\n          <p class=\"products__price\">Price: $${prod.price}</p>\n        </li>`\n    )\n    .join('');\n}\n\nexport function appendProducts(products) {\n  refs.productsList.insertAdjacentHTML(\n    'beforeend',\n    products\n      .map(\n        prod =>\n          `<li class=\"products__item\" data-id=\"${prod.id}\">\n            <img class=\"products__image\" src=\"${prod.thumbnail}\" alt=\"${prod.title}\"/>\n            <p class=\"products__title\">${prod.title}</p>\n            <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:</span> ${prod.brand}</p>\n            <p class=\"products__category\">Category: ${prod.category}</p>\n            <p class=\"products__price\">Price: $${prod.price}</p>\n          </li>`\n      )\n      .join('')\n  );\n}\n\nexport function renderNotFound(show) {\n  if (show) refs.notFound.classList.add('not-found--visible');\n  else refs.notFound.classList.remove('not-found--visible');\n}\n","export const PRODUCTS_PER_PAGE = 12;\n","import iziToast from 'izitoast';\nimport { fetchCategories, fetchProducts } from './products-api.js';\nimport {\n  renderCategories,\n  renderProducts,\n  appendProducts,\n  renderNotFound,\n} from './render-function.js';\nimport { refs } from './refs.js';\nimport { PRODUCTS_PER_PAGE } from './constants.js';\n\nlet currentCategory = 'All';\nlet currentPage = 1;\nlet totalProducts = 0;\n\nexport async function onHomeLoad() {\n  try {\n    let categories = await fetchCategories();\n    categories = ['All', ...categories];\n    renderCategories(categories, currentCategory);\n    refs.categoriesList.addEventListener('click', onCategoryClick);\n    loadProducts();\n  } catch (e) {\n    iziToast.error({ message: 'Не вдалося завантажити категорії' });\n  }\n}\n\nasync function loadProducts(reset = true) {\n  try {\n    if (reset) {\n      currentPage = 1;\n      refs.productsList.innerHTML = '';\n    }\n    const { products, total } = await fetchProducts({\n      category: currentCategory,\n      page: currentPage,\n      limit: PRODUCTS_PER_PAGE,\n    });\n    totalProducts = total;\n\n    if (reset) renderProducts(products);\n    else appendProducts(products);\n\n    renderNotFound(!products.length);\n\n    if (refs.loadMoreBtn) {\n      refs.loadMoreBtn.style.display =\n        currentPage * PRODUCTS_PER_PAGE < totalProducts ? '' : 'none';\n      refs.loadMoreBtn.onclick = onLoadMoreClick;\n    } else if (currentPage * PRODUCTS_PER_PAGE < totalProducts) {\n      const btn = document.createElement('button');\n      btn.textContent = 'Load More';\n      btn.className = 'load-more-btn';\n      refs.productsList.after(btn);\n      btn.onclick = onLoadMoreClick;\n    }\n  } catch (e) {\n    iziToast.error({ message: 'Не вдалося завантажити продукти' });\n  }\n}\n\nfunction onCategoryClick(e) {\n  if (!e.target.classList.contains('categories__btn')) return;\n  currentCategory = e.target.textContent;\n  renderCategories(\n    [...refs.categoriesList.querySelectorAll('.categories__btn')].map(\n      btn => btn.textContent\n    ),\n    currentCategory\n  );\n  loadProducts(true);\n}\n\nfunction onLoadMoreClick() {\n  currentPage += 1;\n  loadProducts(false);\n}\n","import { onHomeLoad } from './js/handlers.js';\n\ndocument.addEventListener('DOMContentLoaded', onHomeLoad);\n"],"names":["BASE_URL","fetchCategories","res","fetchProducts","category","page","limit","url","refs","renderCategories","categories","activeCategory","cat","renderProducts","products","prod","appendProducts","renderNotFound","show","PRODUCTS_PER_PAGE","currentCategory","currentPage","totalProducts","onHomeLoad","onCategoryClick","loadProducts","iziToast","reset","total","onLoadMoreClick","btn"],"mappings":"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"}