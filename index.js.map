{"version":3,"file":"index.js","sources":["../src/js/products-api.js","../src/js/handlers.js","../src/home.js","../src/js/modal.js"],"sourcesContent":["\n// Функції для роботи з бекендом\n\nconst BASE_URL = 'https://dummyjson.com';\nexport async function getProductById(id){\n    const url = `${BASE_URL}/products/${id}`;\n\n    try{\n        const response = await fetch(url);\n        if(!response.ok){\n            throw new Error(`Продукт з ID=${id} не знайдено`);  \n        }\n        return response.json();\n    }catch (error){\n        // iziToast.error({\n        //     message: `Продукт з ID=${id} не знайдено`,\n        //     position: 'topRight',\n        //     timeout: 2000,\n        //     backgroundColor: '#ffa000',\n        //   });\n          throw error;\n    }\n}\n\n\n\nexport async function fetchCategories() {\n  const res = await fetch(`${BASE_URL}/products/categories`);\n  if (!res.ok) throw new Error('Failed to fetch categories');\n  return res.json();\n}\n\nexport async function fetchProducts({\n  category = '',\n  page = 1,\n  limit = 12,\n} = {}) {\n  let url;\n  if (category && category !== 'All') {\n    url = `${BASE_URL}/products/category/${encodeURIComponent(\n      category\n    )}?limit=${limit}&skip=${(page - 1) * limit}`;\n  } else {\n    url = `${BASE_URL}/products?limit=${limit}&skip=${(page - 1) * limit}`;\n  }\n  const res = await fetch(url);\n  if (!res.ok) throw new Error('Failed to fetch products');\n  return res.json();\n}\n\n","import iziToast from 'izitoast';\nimport { fetchCategories, fetchProducts } from './products-api.js';\nimport {\n  renderCategories,\n  renderProducts,\n  appendProducts,\n  renderNotFound,\n} from './render-function.js';\nimport { refs } from './refs.js';\nimport { PRODUCTS_PER_PAGE } from './constants.js';\n\nlet currentCategory = 'All';\nlet currentPage = 1;\nlet totalProducts = 0;\n\nexport async function onHomeLoad() {\n  try {\n    let categories = await fetchCategories();\n    categories = ['All', ...categories];\n    renderCategories(categories, currentCategory);\n    refs.categoriesList.addEventListener('click', onCategoryClick);\n    loadProducts();\n  } catch (e) {\n    iziToast.error({ message: 'Не вдалося завантажити категорії' });\n  }\n}\n\nasync function loadProducts(reset = true) {\n  try {\n    if (reset) {\n      currentPage = 1;\n      refs.productsList.innerHTML = '';\n    }\n    const { products, total } = await fetchProducts({\n      category: currentCategory,\n      page: currentPage,\n      limit: PRODUCTS_PER_PAGE,\n    });\n    totalProducts = total;\n\n    if (reset) renderProducts(products);\n    else appendProducts(products);\n\n    renderNotFound(!products.length);\n\n    if (refs.loadMoreBtn) {\n      refs.loadMoreBtn.style.display =\n        currentPage * PRODUCTS_PER_PAGE < totalProducts ? '' : 'none';\n      refs.loadMoreBtn.onclick = onLoadMoreClick;\n    } else if (currentPage * PRODUCTS_PER_PAGE < totalProducts) {\n      const btn = document.createElement('button');\n      btn.textContent = 'Load More';\n      btn.className = 'load-more-btn';\n      refs.productsList.after(btn);\n      btn.onclick = onLoadMoreClick;\n    }\n  } catch (e) {\n    iziToast.error({ message: 'Не вдалося завантажити продукти' });\n  }\n}\n\nfunction onCategoryClick(e) {\n  if (!e.target.classList.contains('categories__btn')) return;\n  currentCategory = e.target.textContent;\n  renderCategories(\n    [...refs.categoriesList.querySelectorAll('.categories__btn')].map(\n      btn => btn.textContent\n    ),\n    currentCategory\n  );\n  loadProducts(true);\n}\n\nfunction onLoadMoreClick() {\n  currentPage += 1;\n  loadProducts(false);\n}\n","import { onHomeLoad } from './js/handlers.js';\n\ndocument.addEventListener('DOMContentLoaded', onHomeLoad);\n","//Описана робота модалки - відкриття закриття і все що з модалкою повʼязано\n\nimport { refs } from \"./refs\";\nimport {getProductById} from './products-api';\nimport { renderModal } from \"./render-function\";\n\nrefs.productsList.addEventListener('click', toggleModal);\n// refs.closeModalBtn.addEventListener('click', toggleModal);\n\nasync function toggleModal(event){\n    if(event.target.nodeName === 'LI' ){\n        return;\n    }\n   \n   \nconst product = await getProductById(event.target.parentNode.dataset.id);\nrenderModal(product);\nrefs.modal.classList.add('is-open');\n}"],"names":["BASE_URL","getProductById","id","url","response","error","fetchCategories","res","fetchProducts","category","page","limit","currentCategory","currentPage","totalProducts","onHomeLoad","categories","renderCategories","refs","onCategoryClick","loadProducts","iziToast","reset","products","total","PRODUCTS_PER_PAGE","renderProducts","appendProducts","renderNotFound","onLoadMoreClick","btn","e","toggleModal","event","product","renderModal"],"mappings":"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"}