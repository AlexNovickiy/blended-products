import{c as g,b as r,P as c,a as p,d as L,r as h}from"./assets/constants-D-vNJdzF.js";import{i as m}from"./assets/vendor-iVKk4foX.js";const d="https://dummyjson.com";async function y(){const t=await fetch(`${d}/products/categories`);if(!t.ok)throw new Error("Failed to fetch categories");return t.json()}async function C({category:t="",page:e=1,limit:n=12}={}){let o;t&&t!=="All"?o=`${d}/products/category/${encodeURIComponent(t)}?limit=${n}&skip=${(e-1)*n}`:o=`${d}/products?limit=${n}&skip=${(e-1)*n}`;const u=await fetch(o);if(!u.ok)throw new Error("Failed to fetch products");return u.json()}let a="All",s=1,i=0;async function P(){try{let t=await y();t=["All",...t],g(t,a),r.categoriesList.addEventListener("click",k),l()}catch{m.error({message:"Не вдалося завантажити категорії"})}}async function l(t=!0){try{t&&(s=1,r.productsList.innerHTML="");const{products:e,total:n}=await C({category:a,page:s,limit:c});if(i=n,t?p(e):L(e),h(!e.length),r.loadMoreBtn)r.loadMoreBtn.style.display=s*c<i?"":"none",r.loadMoreBtn.onclick=f;else if(s*c<i){const o=document.createElement("button");o.textContent="Load More",o.className="load-more-btn",r.productsList.after(o),o.onclick=f}}catch{m.error({message:"Не вдалося завантажити продукти"})}}function k(t){t.target.classList.contains("categories__btn")&&(a=t.target.textContent,g([...r.categoriesList.querySelectorAll(".categories__btn")].map(e=>e.textContent),a),l(!0))}function f(){s+=1,l(!1)}document.addEventListener("DOMContentLoaded",P);
//# sourceMappingURL=index.js.map
