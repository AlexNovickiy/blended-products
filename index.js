import{c as p,r,P as i,b as m,d as L,a as h,e as y}from"./assets/constants-CIZrvael.js";import{i as g}from"./assets/vendor-iVKk4foX.js";const a="https://dummyjson.com";async function w(t){const e=`${a}/products/${t}`;try{const o=await fetch(e);if(!o.ok)throw new Error(`Продукт з ID=${t} не знайдено`);return o.json()}catch(o){throw o}}async function C(){const t=await fetch(`${a}/products/categories`);if(!t.ok)throw new Error("Failed to fetch categories");return t.json()}async function k({category:t="",page:e=1,limit:o=12}={}){let n;t&&t!=="All"?n=`${a}/products/category/${encodeURIComponent(t)}?limit=${o}&skip=${(e-1)*o}`:n=`${a}/products?limit=${o}&skip=${(e-1)*o}`;const u=await fetch(n);if(!u.ok)throw new Error("Failed to fetch products");return u.json()}let c="All",s=1,d=0;async function P(){try{let t=await C();t=["All",...t],p(t,c),r.categoriesList.addEventListener("click",$),l()}catch{g.error({message:"Не вдалося завантажити категорії"})}}async function l(t=!0){try{t&&(s=1,r.productsList.innerHTML="");const{products:e,total:o}=await k({category:c,page:s,limit:i});if(d=o,t?m(e):L(e),h(!e.length),r.loadMoreBtn)r.loadMoreBtn.style.display=s*i<d?"":"none",r.loadMoreBtn.onclick=f;else if(s*i<d){const n=document.createElement("button");n.textContent="Load More",n.className="load-more-btn",r.productsList.after(n),n.onclick=f}}catch{g.error({message:"Не вдалося завантажити продукти"})}}function $(t){t.target.classList.contains("categories__btn")&&(c=t.target.textContent,p([...r.categoriesList.querySelectorAll(".categories__btn")].map(e=>e.textContent),c),l(!0))}function f(){s+=1,l(!1)}document.addEventListener("DOMContentLoaded",P);r.productsList.addEventListener("click",E);async function E(t){if(t.target.nodeName==="LI")return;const e=await w(t.target.parentNode.dataset.id);y(e),r.modal.classList.add("is-open")}
//# sourceMappingURL=index.js.map
